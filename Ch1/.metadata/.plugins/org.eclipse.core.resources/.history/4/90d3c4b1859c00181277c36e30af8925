/**
 * horizontal histogram of length of words
 */

#include <stdio.h>
#define FALSE 0
#define TRUE 1

int main() {
	int numLengths = 10;
	int wordLengths[numLengths];

	int c = 0;
	int length = 0;
	int inAWord = FALSE;
	FILE *fp = fopen("test.txt", "r");
	if (fp == NULL) {
		perror("cannot open file");
		getchar();
		return -1;
	}
	while ( (c=fgetc(fp)) != EOF) {
		if ( (((c-'A') >= 0) && ((c-'Z') <= 0)) ||
			 (((c-'a') >= 0) && ((c-'z') <= 0)) ||
			 (((c-'0') >= 0) && ((c-'9') <= 0)) ) {
			if (inAWord == FALSE) {
				inAWord = TRUE;
			}
			else {
				length++;
			}
		}
		else {
			if (inAWord == TRUE) {
				if (length>=10) {
					length = 10;
				}
				inAWord = FALSE;
				wordLengths[length]++;
				length = 0;
			}
		}
	}

	for (int i = 0; i < numLengths; i++) {
		if (i == numLengths - 1)
			printf("%2d+: %d\n", i+1, wordLengths[i]);
		else
			printf(" %2d: %d\n", i+1, wordLengths[i]);
	}

	return 0;
}
